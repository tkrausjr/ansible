# This playbook will setup kubeadm on Linux hosts for Kubernetes installation
# 1. 
# 2. 
# 3. 

- hosts: all

  tasks:
      - name: Install ebtables packages
        apt: 
          name: ebtables
          state: present
          update_cache: yes

      - name: Install ethtool packages
        apt: 
          name: ethtool
          state: present
      
      - name: Install docker packages
        apt: 
          name: docker
          state: present
      
      - name: Install curl -s
        apt: 
          name: apt-transport-https
          state: present 
      
      - name: Update apt-key
        shell: curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -

      - name: Install curl -s
        shell: echo "deb http://apt.kubernetes.io/ kubernetes-xenial main" >> /etc/apt/sources.list.d/kubernetes.list
 
      - name: Install kubeadm packages
        apt: 
          name: [kubelet, kubeadm, kubectl]
          state: present
          update_cache: yes